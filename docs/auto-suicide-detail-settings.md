# 自動自殺詳細設定ドキュメント

1. 概要  
   自動自殺詳細設定では、ラウンド名とテラー名を組み合わせたルールを1行ずつ記述し、状況に応じて自動的に自殺するかどうかを制御できます。ルールは下から上に向かって評価され、最下行が最も優先度が高くなります。

2. ルール記述形式  
   ラウンド式:テラー式:値  
     値 = 1  自動自殺する（ラウンド開始から約13秒後など即時モード）  
     値 = 2  自動自殺する（ラウンド開始から約40秒の遅延自殺モード）  
     値 = 0  自動自殺しない

   ラウンド式・テラー式は空欄可（空欄は「すべて」を意味します）。値だけの行（例: `1`）は全ラウンド・全テラーに適用されます。

3. 式の書き方  
   - `||` : 論理和（OR）
   - `&&` : 論理積（AND）
   - `!`  : 否定
   - `()` : グルーピング

   ラウンド式やテラー式には上記演算子を使った論理式を記述できます。  
   例:  
     `クラシック||オルタネイト::1` — クラシックまたはオルタネイトなら自殺  
     `!(クラシック||パニッシュ)::1` — クラシックとパニッシュ以外のラウンドで自殺  
     `クラシック:!(T1||T2):0` — クラシックラウンドで T1・T2 以外なら自殺しない  
    `:!(A||B)&&C:1` — A・B以外でCのテラー時に自殺  
     `A\:B:C\:D:1` — 名前に `:` を含む場合は `\:` でエスケープする  

   単純な否定はフィールドの先頭に `!` を付けるだけでも指定できます（例: `!クラシック::1`）。  
   複雑な条件を否定するときは `!(A||B)` のように括弧で括ってください。  
   ラウンド名・テラー名の表記はゲーム画面ではなく ToNRoundCounter 上の表示と一致させる必要があります。

4. 優先順位  
   ルールは下の行ほど優先度が高く、条件を満たした最初の行が採用されます。  
   例:
   ```
   0
   クラシック::1
   ```
   → クラシック以外は自殺しないが、クラシックでは自殺する。

5. 曖昧マッチング  
   「曖昧マッチング」チェックボックスをオンにすると、ラウンド名やテラー名に多少の誤字があっても近似一致で判定します。

6. 保存時の自動整理  
   保存時には、重複しているルールや、理論的に無意味となるルール（上位のルールで完全にカバーされているものなど）が自動的に削除されます。

7. プリセット操作  
   現在のチェック状態・詳細ルール・曖昧マッチ設定をプリセットとして保存／読み込みできます。さらにプリセットのインポートとエクスポートも可能です。

